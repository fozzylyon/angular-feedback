(function(){angular.module("angular-feedback",[]).directive("feedbackWidget",["$http","$window","$timeout",function(a,b,c){return{restrict:"E",scope:{url:"@",successMessage:"@"},link:function(d,e){var f=angular.element(b),g=e.find(".mod")[0].clientWidth/2;return d.feedback={},d.open=!1,d.submitFeedback=function(){a.post(d.url,{feedback:d.feedback}).success(function(){d.success=!0,c(d.close,2e3)})},d.close=function(){d.feedback.comment="",d.open=!1},f.bind("resize",function(){d.open&&(e.find(".mod").css("left",f.outerWidth()/2-g+"px"),d.$apply())}),d.$watch("open",function(a){return a?(e.find(".mod").css("left",f.outerWidth()/2-g+"px"),e.find("textarea#feedbackInput").focus()):void 0})},template:"<div><div class='overlay' ng-show='open'></div><div class='mod' ng-show='open'><div class='modal-dialog'><div class='modal-content'><div class='modal-header'><button type='button' class='close' ng-click='close()'>&times;</button><h4 class='modal-title'>Feedback</h4></div><div class='modal-body'><form name='feedback' role='form' class='form-horizontal' ng-model='feedback.comment' ng-submit='submitFeedback()''><div class='form-group'><label class='control-label sr-only' for='feedbackInput'>Feedback</label><textarea ng-show='!success' id='feedbackInput' class='form-control' row='3' ng-model='feedback.comment' placeholder='Leave any feedback'></textarea><p ng-show='success'>{{successMessage}}<p></div></div><div class='modal-footer'><button class='btn btn-primary' type='submit'>Submit</button><button class='btn btn-default' type='button' ng-click='close()'>Cancel</button></div></form></div></div></div><button ng-click='open=!open;' class='feedback-launch btn btn-success'>Feedback</button></div>"}}])}).call(this);